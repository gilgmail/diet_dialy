# 📋 Google Sheets 同步修復手動測試清單

## 🎯 測試目標
驗證 Google Sheets 同步功能修復的完整性和可靠性

## 📅 測試環境
- **測試日期**: ___________
- **測試人員**: ___________
- **瀏覽器版本**: ___________
- **網路環境**: ___________

---

## 🔄 一、同步狀態一致性測試

### 1.1 基本同步功能
- [ ] **測試步驟**: 添加 5 筆食物記錄
- [ ] **驗證點**: 檢查 Google Sheets 是否包含所有記錄
- [ ] **預期結果**: 本地記錄數 = Google Sheets 記錄數
- [ ] **實際結果**: ___________
- [ ] **狀態**: ✅ 通過 / ❌ 失敗

**詳細步驟**:
1. 開啟食物日記頁面
2. 添加以下食物記錄:
   - 白米飯 (主食, 150g)
   - 雞胸肉 (蛋白質, 100g)
   - 青花菜 (蔬菜, 50g)
   - 蘋果 (水果, 1個)
   - 燕麥粥 (主食, 200ml)
3. 點擊同步按鈕
4. 等待同步完成
5. 檢查 Google Sheets 內容

### 1.2 重複資料檢測
- [ ] **測試步驟**: 創建重複食物記錄
- [ ] **驗證點**: 確認智能去重功能正常
- [ ] **預期結果**: 重複記錄被自動移除
- [ ] **實際結果**: ___________
- [ ] **狀態**: ✅ 通過 / ❌ 失敗

**詳細步驟**:
1. 添加相同食物記錄 3 次
2. 觸發智能同步
3. 檢查最終只保留 1 筆記錄
4. 驗證同步報告顯示去重數量

### 1.3 欄位完整性驗證
- [ ] **測試步驟**: 驗證所有欄位正確同步
- [ ] **驗證點**: 檢查各欄位值是否準確
- [ ] **預期結果**: 所有欄位值完全匹配
- [ ] **實際結果**: ___________
- [ ] **狀態**: ✅ 通過 / ❌ 失敗

**檢查欄位**:
- [ ] 日期 (格式: YYYY-MM-DD)
- [ ] 時間 (格式: HH:MM:SS)
- [ ] 食物名稱 (中文正確顯示)
- [ ] 食物類別
- [ ] 醫療評分
- [ ] 備註內容
- [ ] 用戶ID

---

## 🌐 二、網絡中斷和恢復測試

### 2.1 離線模式測試
- [ ] **測試步驟**: 斷開網路連接並添加記錄
- [ ] **驗證點**: 離線佇列正常運作
- [ ] **預期結果**: 記錄暫存於離線佇列
- [ ] **實際結果**: ___________
- [ ] **狀態**: ✅ 通過 / ❌ 失敗

**詳細步驟**:
1. 斷開網路連接 (飛行模式或關閉 Wi-Fi)
2. 添加 3 筆食物記錄
3. 檢查同步狀態顯示 "離線"
4. 確認記錄加入離線佇列
5. 恢復網路連接
6. 驗證自動同步執行

### 2.2 網路恢復自動同步
- [ ] **測試步驟**: 恢復網路後驗證自動同步
- [ ] **驗證點**: 離線記錄自動上傳
- [ ] **預期結果**: 所有離線記錄成功同步
- [ ] **實際結果**: ___________
- [ ] **狀態**: ✅ 通過 / ❌ 失敗

### 2.3 間歇性網路問題
- [ ] **測試步驟**: 模擬網路不穩定
- [ ] **驗證點**: 重試機制正常運作
- [ ] **預期結果**: 失敗操作自動重試並最終成功
- [ ] **實際結果**: ___________
- [ ] **狀態**: ✅ 通過 / ❌ 失敗

**模擬方法**:
- 開啟開發者工具 → Network → 設定為 "Slow 3G"
- 或使用 "Offline" 模式間歇性切換

---

## 🔐 三、認證過期和重新認證測試

### 3.1 Token 自動刷新
- [ ] **測試步驟**: 模擬 Google API token 過期
- [ ] **驗證點**: 自動刷新機制運作
- [ ] **預期結果**: Token 過期後自動刷新並繼續操作
- [ ] **實際結果**: ___________
- [ ] **狀態**: ✅ 通過 / ❌ 失敗

**注意**: 此測試可能需要等待實際 token 過期 (通常 1 小時)

### 3.2 認證完全失效處理
- [ ] **測試步驟**: 撤銷 Google 帳號授權
- [ ] **驗證點**: 錯誤處理和用戶提示
- [ ] **預期結果**: 顯示重新登入提示，資料不丟失
- [ ] **實際結果**: ___________
- [ ] **狀態**: ✅ 通過 / ❌ 失敗

**測試步驟**:
1. 前往 Google 帳號設定 → 安全性 → 第三方應用程式存取權
2. 撤銷 Diet Daily 應用授權
3. 回到應用嘗試同步
4. 檢查錯誤提示和處理流程

### 3.3 重新認證流程
- [ ] **測試步驟**: 完成重新認證流程
- [ ] **驗證點**: 認證後同步恢復正常
- [ ] **預期結果**: 重新登入後功能完全恢復
- [ ] **實際結果**: ___________
- [ ] **狀態**: ✅ 通過 / ❌ 失敗

---

## 📚 四、歷史記錄完整性測試

### 4.1 大量資料同步
- [ ] **測試步驟**: 同步 50+ 筆歷史記錄
- [ ] **驗證點**: 所有記錄完整同步
- [ ] **預期結果**: 記錄數量一致，內容無遺漏
- [ ] **實際結果**: ___________
- [ ] **同步時間**: _______ 秒
- [ ] **狀態**: ✅ 通過 / ❌ 失敗

### 4.2 時間範圍測試
- [ ] **測試步驟**: 測試不同時間範圍的記錄
- [ ] **驗證點**: 跨月、跨年記錄正確處理
- [ ] **預期結果**: 時間排序正確，格式統一
- [ ] **實際結果**: ___________
- [ ] **狀態**: ✅ 通過 / ❌ 失敗

**測試時間範圍**:
- [ ] 今日記錄
- [ ] 本週記錄
- [ ] 本月記錄
- [ ] 跨月記錄 (例如: 12/31 → 1/1)

### 4.3 特殊字符處理
- [ ] **測試步驟**: 測試包含特殊字符的記錄
- [ ] **驗證點**: 中文、表情符號、特殊符號正確顯示
- [ ] **預期結果**: 所有字符完整保存
- [ ] **實際結果**: ___________
- [ ] **狀態**: ✅ 通過 / ❌ 失敗

**測試內容**:
- 中文: 麻婆豆腐、小籠包
- 表情符號: 🍎🥗🍚
- 特殊符號: &、<>、"、'

---

## 🎨 五、用戶介面測試

### 5.1 同步狀態指示器
- [ ] **測試項目**: 同步狀態圖示正確顯示
- [ ] **驗證點**: 不同狀態對應正確圖示和文字
- [ ] **狀態**: ✅ 通過 / ❌ 失敗

**檢查狀態**:
- [ ] 🟢 已同步 (綠色勾號)
- [ ] 🔵 同步中 (藍色旋轉)
- [ ] 🟡 待同步 (橙色時鐘)
- [ ] 🔴 同步錯誤 (紅色警告)
- [ ] ⚫ 離線狀態 (灰色 Wi-Fi)

### 5.2 手動同步按鈕
- [ ] **測試項目**: 手動同步按鈕功能
- [ ] **驗證點**: 按鈕狀態和反饋正確
- [ ] **狀態**: ✅ 通過 / ❌ 失敗

**檢查項目**:
- [ ] 按鈕可點擊性 (依據連接狀態)
- [ ] 點擊後顯示同步中狀態
- [ ] 同步完成後狀態更新
- [ ] 失敗時顯示錯誤訊息

### 5.3 進度和反饋訊息
- [ ] **測試項目**: 同步進度和成功/失敗訊息
- [ ] **驗證點**: 用戶反饋清晰易懂
- [ ] **狀態**: ✅ 通過 / ❌ 失敗

---

## ⚡ 六、性能測試

### 6.1 同步速度測試
**小量資料** (1-10 筆):
- [ ] **同步時間**: _______ 秒
- [ ] **性能標準**: < 5 秒
- [ ] **狀態**: ✅ 符合 / ❌ 超時

**中量資料** (11-50 筆):
- [ ] **同步時間**: _______ 秒
- [ ] **性能標準**: < 15 秒
- [ ] **狀態**: ✅ 符合 / ❌ 超時

**大量資料** (51-100 筆):
- [ ] **同步時間**: _______ 秒
- [ ] **性能標準**: < 30 秒
- [ ] **狀態**: ✅ 符合 / ❌ 超時

### 6.2 記憶體使用測試
- [ ] **測試項目**: 長時間使用記憶體穩定性
- [ ] **測試方法**: 開啟開發者工具 → Performance → Memory
- [ ] **檢查項目**: 無明顯記憶體洩漏
- [ ] **狀態**: ✅ 通過 / ❌ 失敗

---

## 🔍 七、回歸測試

### 7.1 核心功能驗證
- [ ] **食物記錄添加**: 功能正常
- [ ] **歷史記錄查看**: 資料完整
- [ ] **醫療報告生成**: 運作正常
- [ ] **Google 登入/登出**: 流程順暢
- [ ] **狀態**: ✅ 通過 / ❌ 失敗

### 7.2 相容性測試
**瀏覽器相容性**:
- [ ] Chrome (最新版)
- [ ] Firefox (最新版)
- [ ] Safari (最新版)
- [ ] Edge (最新版)

**裝置相容性**:
- [ ] 桌面電腦
- [ ] 平板電腦
- [ ] 手機 (響應式設計)

---

## 📊 測試結果摘要

### 測試統計
- **總測試項目**: _______ 項
- **通過項目**: _______ 項
- **失敗項目**: _______ 項
- **通過率**: _______ %

### 關鍵問題記錄
| 問題編號 | 問題描述 | 嚴重程度 | 重現步驟 | 預期修復時間 |
|---------|----------|----------|----------|-------------|
| 001 | | 🔴 High / 🟡 Medium / 🟢 Low | | |
| 002 | | | | |
| 003 | | | | |

### 修復建議
1. **立即修復** (關鍵問題):
   -

2. **短期修復** (高優先級):
   -

3. **長期改進** (優化項目):
   -

### 驗收決定
- [ ] ✅ **通過驗收** - 所有關鍵功能正常，可以發布
- [ ] ⚠️ **條件通過** - 有小問題但不影響核心功能
- [ ] ❌ **不通過** - 存在嚴重問題，需要修復後重新測試

**測試完成時間**: ___________
**測試人員簽名**: ___________
# 食物資料庫導入指南
## 解決食物資料庫為 0 筆的問題

### 🎯 問題分析
食物資料庫顯示 0 筆資料是因為還沒有匯入基礎食物資料。

### 🚀 快速解決方案

#### 方案一：簡化版導入 (推薦，快速測試)
1. **登入 Supabase Dashboard**
   - 前往 https://supabase.com/dashboard
   - 選擇您的 diet-daily 專案

2. **開啟 SQL Editor**
   - 點擊左側選單的 "SQL Editor"
   - 建立新查詢

3. **執行簡化導入腳本**
   - 複製 `import_taiwan_foods_simplified.sql` 的內容
   - 貼到 SQL Editor 中
   - 點擊 "Run" 執行
   - 預期結果：匯入 50 種常見台灣食物

#### 方案二：完整版導入 (包含 1000+ 種食物)
1. **執行完整導入腳本**
   - 使用 `taiwan_1000_foods_database.sql`
   - 檔案較大，可能需要分批執行

### 📊 驗證導入結果

執行以下 SQL 檢查導入是否成功：

```sql
-- 檢查總食物數量
SELECT COUNT(*) as total_foods FROM diet_daily_foods;

-- 檢查台灣食物數量
SELECT COUNT(*) as taiwan_foods
FROM diet_daily_foods
WHERE taiwan_origin = true;

-- 按分類統計
SELECT category, COUNT(*) as count
FROM diet_daily_foods
GROUP BY category
ORDER BY count DESC;
```

### 🔧 如果遇到錯誤

#### 錯誤 1: "Column does not exist"
```sql
-- 先執行 schema 更新
ALTER TABLE diet_daily_foods
ADD COLUMN IF NOT EXISTS taiwan_origin BOOLEAN DEFAULT FALSE;
```

#### 錯誤 2: "Permission denied"
- 確保您有資料庫管理權限
- 或聯繫系統管理員協助執行

#### 錯誤 3: "Row Level Security"
- 在 Supabase Dashboard 中執行，會自動繞過 RLS
- 或暫時停用 RLS (僅限管理員)

### ✅ 成功確認

導入成功後，您應該看到：
- **食物資料庫管理頁面** 顯示已匯入的食物
- **可以搜尋、編輯、新增食物**
- **食物分類齊全** (主食、蔬菜、水果、肉類等)

### 📱 測試步驟

1. **訪問管理頁面**
   ```
   http://localhost:3000/admin/food-database
   ```

2. **確認功能正常**
   - 可以看到食物列表
   - 搜尋功能正常
   - 可以編輯食物資訊
   - 可以新增自訂食物

3. **測試前端功能**
   ```
   http://localhost:3000/food-diary
   ```
   - 新增食物記錄時應該能搜尋到匯入的食物

### 🎉 完成！

執行導入後，您的食物資料庫就會有完整的台灣食物資料，可以正常使用所有功能了！

---

**建議：先使用簡化版導入快速測試，確認功能正常後再考慮匯入完整版資料庫。**